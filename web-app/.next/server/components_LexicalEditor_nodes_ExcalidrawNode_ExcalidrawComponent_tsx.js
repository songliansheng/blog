"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "components_LexicalEditor_nodes_ExcalidrawNode_ExcalidrawComponent_tsx";
exports.ids = ["components_LexicalEditor_nodes_ExcalidrawNode_ExcalidrawComponent_tsx"];
exports.modules = {

/***/ "./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawComponent.tsx":
/*!*******************************************************************************!*\
  !*** ./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawComponent.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ExcalidrawComponent)\n/* harmony export */ });\n/* harmony import */ var _lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lexical/react/LexicalComposerContext */ \"@lexical/react/LexicalComposerContext\");\n/* harmony import */ var _lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lexical_react_useLexicalNodeSelection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lexical/react/useLexicalNodeSelection */ \"@lexical/react/useLexicalNodeSelection\");\n/* harmony import */ var _lexical_react_useLexicalNodeSelection__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_lexical_react_useLexicalNodeSelection__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lexical_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lexical/utils */ \"@lexical/utils\");\n/* harmony import */ var _lexical_utils__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_lexical_utils__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lexical__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lexical */ \"lexical\");\n/* harmony import */ var lexical__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lexical__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _ui_ImageResizer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../ui/ImageResizer */ \"./components/LexicalEditor/ui/ImageResizer.tsx\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! . */ \"./components/LexicalEditor/nodes/ExcalidrawNode/index.tsx\");\n/* harmony import */ var _ExcalidrawImage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ExcalidrawImage */ \"./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawImage.tsx\");\n/* harmony import */ var _ExcalidrawModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ExcalidrawModal */ \"./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawModal.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);\nvar _jsxFileName = \"/home/songliansheng/projects/blog-ui/components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawComponent.tsx\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ExcalidrawComponent(_ref) {\n  var nodeKey = _ref.nodeKey,\n      data = _ref.data;\n\n  var _useLexicalComposerCo = (0,_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_0__.useLexicalComposerContext)(),\n      _useLexicalComposerCo2 = _slicedToArray(_useLexicalComposerCo, 1),\n      editor = _useLexicalComposerCo2[0];\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(data === '[]' && editor.isEditable()),\n      isModalOpen = _useState[0],\n      setModalOpen = _useState[1];\n\n  var imageContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  var buttonRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  var captionButtonRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n\n  var _useLexicalNodeSelect = (0,_lexical_react_useLexicalNodeSelection__WEBPACK_IMPORTED_MODULE_1__.useLexicalNodeSelection)(nodeKey),\n      _useLexicalNodeSelect2 = _slicedToArray(_useLexicalNodeSelect, 3),\n      isSelected = _useLexicalNodeSelect2[0],\n      setSelected = _useLexicalNodeSelect2[1],\n      clearSelection = _useLexicalNodeSelect2[2];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false),\n      isResizing = _useState2[0],\n      setIsResizing = _useState2[1];\n\n  var onDelete = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(function (event) {\n    if (isSelected && (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isNodeSelection)((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getSelection)())) {\n      event.preventDefault();\n      editor.update(function () {\n        var node = (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getNodeByKey)(nodeKey);\n\n        if ((0,___WEBPACK_IMPORTED_MODULE_6__.$isExcalidrawNode)(node)) {\n          node.remove();\n        }\n\n        setSelected(false);\n      });\n    }\n\n    return false;\n  }, [editor, isSelected, nodeKey, setSelected]); // Set editor to readOnly if excalidraw is open to prevent unwanted changes\n\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(function () {\n    if (isModalOpen) {\n      editor.setEditable(false);\n    } else {\n      editor.setEditable(true);\n    }\n  }, [isModalOpen, editor]);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(function () {\n    return (0,_lexical_utils__WEBPACK_IMPORTED_MODULE_2__.mergeRegister)(editor.registerCommand(lexical__WEBPACK_IMPORTED_MODULE_3__.CLICK_COMMAND, function (event) {\n      var buttonElem = buttonRef.current;\n      var eventTarget = event.target;\n\n      if (isResizing) {\n        return true;\n      }\n\n      if (buttonElem !== null && buttonElem.contains(eventTarget)) {\n        if (!event.shiftKey) {\n          clearSelection();\n        }\n\n        setSelected(!isSelected);\n\n        if (event.detail > 1) {\n          setModalOpen(true);\n        }\n\n        return true;\n      }\n\n      return false;\n    }, lexical__WEBPACK_IMPORTED_MODULE_3__.COMMAND_PRIORITY_LOW), editor.registerCommand(lexical__WEBPACK_IMPORTED_MODULE_3__.KEY_DELETE_COMMAND, onDelete, lexical__WEBPACK_IMPORTED_MODULE_3__.COMMAND_PRIORITY_LOW), editor.registerCommand(lexical__WEBPACK_IMPORTED_MODULE_3__.KEY_BACKSPACE_COMMAND, onDelete, lexical__WEBPACK_IMPORTED_MODULE_3__.COMMAND_PRIORITY_LOW));\n  }, [clearSelection, editor, isSelected, isResizing, onDelete, setSelected]);\n  var deleteNode = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(function () {\n    setModalOpen(false);\n    return editor.update(function () {\n      var node = (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getNodeByKey)(nodeKey);\n\n      if ((0,___WEBPACK_IMPORTED_MODULE_6__.$isExcalidrawNode)(node)) {\n        node.remove();\n      }\n    });\n  }, [editor, nodeKey]);\n\n  var setData = function setData(newData) {\n    if (!editor.isEditable()) {\n      return;\n    }\n\n    return editor.update(function () {\n      var node = (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getNodeByKey)(nodeKey);\n\n      if ((0,___WEBPACK_IMPORTED_MODULE_6__.$isExcalidrawNode)(node)) {\n        if (newData.length > 0) {\n          node.setData(JSON.stringify(newData));\n        } else {\n          node.remove();\n        }\n      }\n    });\n  };\n\n  var onResizeStart = function onResizeStart() {\n    setIsResizing(true);\n  };\n\n  var onResizeEnd = function onResizeEnd() {\n    // Delay hiding the resize bars for click case\n    setTimeout(function () {\n      setIsResizing(false);\n    }, 200);\n  };\n\n  var elements = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(function () {\n    return JSON.parse(data);\n  }, [data]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_ExcalidrawModal__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n      initialElements: elements,\n      isShown: isModalOpen,\n      onDelete: deleteNode,\n      onSave: function onSave(newData) {\n        editor.setEditable(true);\n        setData(newData);\n        setModalOpen(false);\n      },\n      closeOnClickOutside: true\n    }), elements.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"button\", {\n      ref: buttonRef,\n      className: \"excalidraw-button \".concat(isSelected ? 'selected' : ''),\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_ExcalidrawImage__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        imageContainerRef: imageContainerRef,\n        className: \"image\",\n        elements: elements\n      }), (isSelected || isResizing) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_ui_ImageResizer__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        buttonRef: captionButtonRef,\n        showCaption: true,\n        setShowCaption: function setShowCaption() {\n          return null;\n        },\n        imageRef: imageContainerRef,\n        editor: editor,\n        onResizeStart: onResizeStart,\n        onResizeEnd: onResizeEnd,\n        captionsEnabled: true\n      })]\n    })]\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xleGljYWxFZGl0b3Ivbm9kZXMvRXhjYWxpZHJhd05vZGUvRXhjYWxpZHJhd0NvbXBvbmVudC50c3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFFZSxTQUFTb0IsbUJBQVQsT0FNQztFQUFBLElBTGRDLE9BS2MsUUFMZEEsT0FLYztFQUFBLElBSmRDLElBSWMsUUFKZEEsSUFJYzs7RUFDZCw0QkFBaUJ0QixnR0FBeUIsRUFBMUM7RUFBQTtFQUFBLElBQU91QixNQUFQOztFQUNBLGdCQUFvQ1QsK0NBQVEsQ0FDMUNRLElBQUksS0FBSyxJQUFULElBQWlCQyxNQUFNLENBQUNDLFVBQVAsRUFEeUIsQ0FBNUM7RUFBQSxJQUFPQyxXQUFQO0VBQUEsSUFBb0JDLFlBQXBCOztFQUdBLElBQU1DLGlCQUFpQixHQUFHZCw2Q0FBTSxDQUEwQixJQUExQixDQUFoQztFQUNBLElBQU1lLFNBQVMsR0FBR2YsNkNBQU0sQ0FBMkIsSUFBM0IsQ0FBeEI7RUFDQSxJQUFNZ0IsZ0JBQWdCLEdBQUdoQiw2Q0FBTSxDQUEyQixJQUEzQixDQUEvQjs7RUFDQSw0QkFDRVosK0ZBQXVCLENBQUNvQixPQUFELENBRHpCO0VBQUE7RUFBQSxJQUFPUyxVQUFQO0VBQUEsSUFBbUJDLFdBQW5CO0VBQUEsSUFBZ0NDLGNBQWhDOztFQUVBLGlCQUFvQ2xCLCtDQUFRLENBQVUsS0FBVixDQUE1QztFQUFBLElBQU9tQixVQUFQO0VBQUEsSUFBbUJDLGFBQW5COztFQUVBLElBQU1DLFFBQVEsR0FBR3pCLGtEQUFXLENBQzFCLFVBQUMwQixLQUFELEVBQTBCO0lBQ3hCLElBQUlOLFVBQVUsSUFBSXpCLHlEQUFnQixDQUFDRCxzREFBYSxFQUFkLENBQWxDLEVBQXFEO01BQ25E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TUFBQSx3QkFHRSx1REFBQyx3REFBRDtRQUNFLGlCQUFpQixFQUFFSCxpQkFEckI7UUFFRSxTQUFTLEVBQUMsT0FGWjtRQUdFLFFBQVEsRUFBRWdDO01BSFosRUFIRixFQVFHLENBQUM3QixVQUFVLElBQUlHLFVBQWYsa0JBQ0MsdURBQUMsd0RBQUQ7UUFDRSxTQUFTLEVBQUVKLGdCQURiO1FBRUUsV0FBVyxFQUFFLElBRmY7UUFHRSxjQUFjLEVBQUU7VUFBQSxPQUFNLElBQU47UUFBQSxDQUhsQjtRQUlFLFFBQVEsRUFBRUYsaUJBSlo7UUFLRSxNQUFNLEVBQUVKLE1BTFY7UUFNRSxhQUFhLEVBQUVpQyxhQU5qQjtRQU9FLFdBQVcsRUFBRUMsV0FQZjtRQVFFLGVBQWUsRUFBRTtNQVJuQixFQVRKO0lBQUEsRUFiSjtFQUFBLEVBREY7QUFzQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibG9nLXVpLy4vY29tcG9uZW50cy9MZXhpY2FsRWRpdG9yL25vZGVzL0V4Y2FsaWRyYXdOb2RlL0V4Y2FsaWRyYXdDb21wb25lbnQudHN4P2VlMTciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG5pbXBvcnQgdHlwZSB7RXhjYWxpZHJhd0VsZW1lbnRGcmFnbWVudH0gZnJvbSAnLi9FeGNhbGlkcmF3TW9kYWwnO1xuaW1wb3J0IHR5cGUge05vZGVLZXl9IGZyb20gJ2xleGljYWwnO1xuXG5pbXBvcnQge3VzZUxleGljYWxDb21wb3NlckNvbnRleHR9IGZyb20gJ0BsZXhpY2FsL3JlYWN0L0xleGljYWxDb21wb3NlckNvbnRleHQnO1xuaW1wb3J0IHt1c2VMZXhpY2FsTm9kZVNlbGVjdGlvbn0gZnJvbSAnQGxleGljYWwvcmVhY3QvdXNlTGV4aWNhbE5vZGVTZWxlY3Rpb24nO1xuaW1wb3J0IHttZXJnZVJlZ2lzdGVyfSBmcm9tICdAbGV4aWNhbC91dGlscyc7XG5pbXBvcnQge1xuICAkZ2V0Tm9kZUJ5S2V5LFxuICAkZ2V0U2VsZWN0aW9uLFxuICAkaXNOb2RlU2VsZWN0aW9uLFxuICBDTElDS19DT01NQU5ELFxuICBDT01NQU5EX1BSSU9SSVRZX0xPVyxcbiAgS0VZX0JBQ0tTUEFDRV9DT01NQU5ELFxuICBLRVlfREVMRVRFX0NPTU1BTkQsXG59IGZyb20gJ2xleGljYWwnO1xuaW1wb3J0IHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBJbWFnZVJlc2l6ZXIgZnJvbSAnLi4vLi4vdWkvSW1hZ2VSZXNpemVyJztcbmltcG9ydCB7JGlzRXhjYWxpZHJhd05vZGV9IGZyb20gJy4nO1xuaW1wb3J0IEV4Y2FsaWRyYXdJbWFnZSBmcm9tICcuL0V4Y2FsaWRyYXdJbWFnZSc7XG5pbXBvcnQgRXhjYWxpZHJhd01vZGFsIGZyb20gJy4vRXhjYWxpZHJhd01vZGFsJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRXhjYWxpZHJhd0NvbXBvbmVudCh7XG4gIG5vZGVLZXksXG4gIGRhdGEsXG59OiB7XG4gIGRhdGE6IHN0cmluZztcbiAgbm9kZUtleTogTm9kZUtleTtcbn0pOiBKU1guRWxlbWVudCB7XG4gIGNvbnN0IFtlZGl0b3JdID0gdXNlTGV4aWNhbENvbXBvc2VyQ29udGV4dCgpO1xuICBjb25zdCBbaXNNb2RhbE9wZW4sIHNldE1vZGFsT3Blbl0gPSB1c2VTdGF0ZTxib29sZWFuPihcbiAgICBkYXRhID09PSAnW10nICYmIGVkaXRvci5pc0VkaXRhYmxlKCksXG4gICk7XG4gIGNvbnN0IGltYWdlQ29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxJbWFnZUVsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYnV0dG9uUmVmID0gdXNlUmVmPEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGNhcHRpb25CdXR0b25SZWYgPSB1c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzU2VsZWN0ZWQsIHNldFNlbGVjdGVkLCBjbGVhclNlbGVjdGlvbl0gPVxuICAgIHVzZUxleGljYWxOb2RlU2VsZWN0aW9uKG5vZGVLZXkpO1xuICBjb25zdCBbaXNSZXNpemluZywgc2V0SXNSZXNpemluZ10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG5cbiAgY29uc3Qgb25EZWxldGUgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChpc1NlbGVjdGVkICYmICRpc05vZGVTZWxlY3Rpb24oJGdldFNlbGVjdGlvbigpKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlZGl0b3IudXBkYXRlKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBub2RlID0gJGdldE5vZGVCeUtleShub2RlS2V5KTtcbiAgICAgICAgICBpZiAoJGlzRXhjYWxpZHJhd05vZGUobm9kZSkpIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldFNlbGVjdGVkKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBbZWRpdG9yLCBpc1NlbGVjdGVkLCBub2RlS2V5LCBzZXRTZWxlY3RlZF0sXG4gICk7XG5cbiAgLy8gU2V0IGVkaXRvciB0byByZWFkT25seSBpZiBleGNhbGlkcmF3IGlzIG9wZW4gdG8gcHJldmVudCB1bndhbnRlZCBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzTW9kYWxPcGVuKSB7XG4gICAgICBlZGl0b3Iuc2V0RWRpdGFibGUoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0b3Iuc2V0RWRpdGFibGUodHJ1ZSk7XG4gICAgfVxuICB9LCBbaXNNb2RhbE9wZW4sIGVkaXRvcl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuIG1lcmdlUmVnaXN0ZXIoXG4gICAgICBlZGl0b3IucmVnaXN0ZXJDb21tYW5kKFxuICAgICAgICBDTElDS19DT01NQU5ELFxuICAgICAgICAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCBidXR0b25FbGVtID0gYnV0dG9uUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgY29uc3QgZXZlbnRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgICBpZiAoaXNSZXNpemluZykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGJ1dHRvbkVsZW0gIT09IG51bGwgJiYgYnV0dG9uRWxlbS5jb250YWlucyhldmVudFRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICBjbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0U2VsZWN0ZWQoIWlzU2VsZWN0ZWQpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmRldGFpbCA+IDEpIHtcbiAgICAgICAgICAgICAgc2V0TW9kYWxPcGVuKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBDT01NQU5EX1BSSU9SSVRZX0xPVyxcbiAgICAgICksXG4gICAgICBlZGl0b3IucmVnaXN0ZXJDb21tYW5kKFxuICAgICAgICBLRVlfREVMRVRFX0NPTU1BTkQsXG4gICAgICAgIG9uRGVsZXRlLFxuICAgICAgICBDT01NQU5EX1BSSU9SSVRZX0xPVyxcbiAgICAgICksXG4gICAgICBlZGl0b3IucmVnaXN0ZXJDb21tYW5kKFxuICAgICAgICBLRVlfQkFDS1NQQUNFX0NPTU1BTkQsXG4gICAgICAgIG9uRGVsZXRlLFxuICAgICAgICBDT01NQU5EX1BSSU9SSVRZX0xPVyxcbiAgICAgICksXG4gICAgKTtcbiAgfSwgW2NsZWFyU2VsZWN0aW9uLCBlZGl0b3IsIGlzU2VsZWN0ZWQsIGlzUmVzaXppbmcsIG9uRGVsZXRlLCBzZXRTZWxlY3RlZF0pO1xuXG4gIGNvbnN0IGRlbGV0ZU5vZGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0TW9kYWxPcGVuKGZhbHNlKTtcbiAgICByZXR1cm4gZWRpdG9yLnVwZGF0ZSgoKSA9PiB7XG4gICAgICBjb25zdCBub2RlID0gJGdldE5vZGVCeUtleShub2RlS2V5KTtcbiAgICAgIGlmICgkaXNFeGNhbGlkcmF3Tm9kZShub2RlKSkge1xuICAgICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbZWRpdG9yLCBub2RlS2V5XSk7XG5cbiAgY29uc3Qgc2V0RGF0YSA9IChuZXdEYXRhOiBSZWFkb25seUFycmF5PEV4Y2FsaWRyYXdFbGVtZW50RnJhZ21lbnQ+KSA9PiB7XG4gICAgaWYgKCFlZGl0b3IuaXNFZGl0YWJsZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBlZGl0b3IudXBkYXRlKCgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGUgPSAkZ2V0Tm9kZUJ5S2V5KG5vZGVLZXkpO1xuICAgICAgaWYgKCRpc0V4Y2FsaWRyYXdOb2RlKG5vZGUpKSB7XG4gICAgICAgIGlmIChuZXdEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBub2RlLnNldERhdGEoSlNPTi5zdHJpbmdpZnkobmV3RGF0YSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvblJlc2l6ZVN0YXJ0ID0gKCkgPT4ge1xuICAgIHNldElzUmVzaXppbmcodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3Qgb25SZXNpemVFbmQgPSAoKSA9PiB7XG4gICAgLy8gRGVsYXkgaGlkaW5nIHRoZSByZXNpemUgYmFycyBmb3IgY2xpY2sgY2FzZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0SXNSZXNpemluZyhmYWxzZSk7XG4gICAgfSwgMjAwKTtcbiAgfTtcblxuICBjb25zdCBlbGVtZW50cyA9IHVzZU1lbW8oKCkgPT4gSlNPTi5wYXJzZShkYXRhKSwgW2RhdGFdKTtcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEV4Y2FsaWRyYXdNb2RhbFxuICAgICAgICBpbml0aWFsRWxlbWVudHM9e2VsZW1lbnRzfVxuICAgICAgICBpc1Nob3duPXtpc01vZGFsT3Blbn1cbiAgICAgICAgb25EZWxldGU9e2RlbGV0ZU5vZGV9XG4gICAgICAgIG9uU2F2ZT17KG5ld0RhdGEpID0+IHtcbiAgICAgICAgICBlZGl0b3Iuc2V0RWRpdGFibGUodHJ1ZSk7XG4gICAgICAgICAgc2V0RGF0YShuZXdEYXRhKTtcbiAgICAgICAgICBzZXRNb2RhbE9wZW4oZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBjbG9zZU9uQ2xpY2tPdXRzaWRlPXt0cnVlfVxuICAgICAgLz5cbiAgICAgIHtlbGVtZW50cy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIHJlZj17YnV0dG9uUmVmfVxuICAgICAgICAgIGNsYXNzTmFtZT17YGV4Y2FsaWRyYXctYnV0dG9uICR7aXNTZWxlY3RlZCA/ICdzZWxlY3RlZCcgOiAnJ31gfT5cbiAgICAgICAgICA8RXhjYWxpZHJhd0ltYWdlXG4gICAgICAgICAgICBpbWFnZUNvbnRhaW5lclJlZj17aW1hZ2VDb250YWluZXJSZWZ9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJpbWFnZVwiXG4gICAgICAgICAgICBlbGVtZW50cz17ZWxlbWVudHN9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7KGlzU2VsZWN0ZWQgfHwgaXNSZXNpemluZykgJiYgKFxuICAgICAgICAgICAgPEltYWdlUmVzaXplclxuICAgICAgICAgICAgICBidXR0b25SZWY9e2NhcHRpb25CdXR0b25SZWZ9XG4gICAgICAgICAgICAgIHNob3dDYXB0aW9uPXt0cnVlfVxuICAgICAgICAgICAgICBzZXRTaG93Q2FwdGlvbj17KCkgPT4gbnVsbH1cbiAgICAgICAgICAgICAgaW1hZ2VSZWY9e2ltYWdlQ29udGFpbmVyUmVmfVxuICAgICAgICAgICAgICBlZGl0b3I9e2VkaXRvcn1cbiAgICAgICAgICAgICAgb25SZXNpemVTdGFydD17b25SZXNpemVTdGFydH1cbiAgICAgICAgICAgICAgb25SZXNpemVFbmQ9e29uUmVzaXplRW5kfVxuICAgICAgICAgICAgICBjYXB0aW9uc0VuYWJsZWQ9e3RydWV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VMZXhpY2FsQ29tcG9zZXJDb250ZXh0IiwidXNlTGV4aWNhbE5vZGVTZWxlY3Rpb24iLCJtZXJnZVJlZ2lzdGVyIiwiJGdldE5vZGVCeUtleSIsIiRnZXRTZWxlY3Rpb24iLCIkaXNOb2RlU2VsZWN0aW9uIiwiQ0xJQ0tfQ09NTUFORCIsIkNPTU1BTkRfUFJJT1JJVFlfTE9XIiwiS0VZX0JBQ0tTUEFDRV9DT01NQU5EIiwiS0VZX0RFTEVURV9DT01NQU5EIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJSZWFjdCIsIkltYWdlUmVzaXplciIsIiRpc0V4Y2FsaWRyYXdOb2RlIiwiRXhjYWxpZHJhd0ltYWdlIiwiRXhjYWxpZHJhd01vZGFsIiwiRXhjYWxpZHJhd0NvbXBvbmVudCIsIm5vZGVLZXkiLCJkYXRhIiwiZWRpdG9yIiwiaXNFZGl0YWJsZSIsImlzTW9kYWxPcGVuIiwic2V0TW9kYWxPcGVuIiwiaW1hZ2VDb250YWluZXJSZWYiLCJidXR0b25SZWYiLCJjYXB0aW9uQnV0dG9uUmVmIiwiaXNTZWxlY3RlZCIsInNldFNlbGVjdGVkIiwiY2xlYXJTZWxlY3Rpb24iLCJpc1Jlc2l6aW5nIiwic2V0SXNSZXNpemluZyIsIm9uRGVsZXRlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVwZGF0ZSIsIm5vZGUiLCJyZW1vdmUiLCJzZXRFZGl0YWJsZSIsInJlZ2lzdGVyQ29tbWFuZCIsImJ1dHRvbkVsZW0iLCJjdXJyZW50IiwiZXZlbnRUYXJnZXQiLCJ0YXJnZXQiLCJjb250YWlucyIsInNoaWZ0S2V5IiwiZGV0YWlsIiwiZGVsZXRlTm9kZSIsInNldERhdGEiLCJuZXdEYXRhIiwibGVuZ3RoIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9uUmVzaXplU3RhcnQiLCJvblJlc2l6ZUVuZCIsInNldFRpbWVvdXQiLCJlbGVtZW50cyIsInBhcnNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawComponent.tsx\n");

/***/ }),

/***/ "./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawImage.tsx":
/*!***************************************************************************!*\
  !*** ./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawImage.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ExcalidrawImage)\n/* harmony export */ });\n/* harmony import */ var _excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @excalidraw/excalidraw */ \"@excalidraw/excalidraw\");\n/* harmony import */ var _excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar _jsxFileName = \"/home/songliansheng/projects/blog-ui/components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawImage.tsx\";\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\n\n\n// exportToSvg has fonts from excalidraw.com\n// We don't want them to be used in open source\nvar removeStyleFromSvg_HACK = function removeStyleFromSvg_HACK(svg) {\n  var _svg$firstElementChil;\n\n  var styleTag = svg === null || svg === void 0 ? void 0 : (_svg$firstElementChil = svg.firstElementChild) === null || _svg$firstElementChil === void 0 ? void 0 : _svg$firstElementChil.firstElementChild; // Generated SVG is getting double-sized by height and width attributes\n  // We want to match the real size of the SVG element\n\n  var viewBox = svg.getAttribute('viewBox');\n\n  if (viewBox != null) {\n    var viewBoxDimensions = viewBox.split(' ');\n    svg.setAttribute('width', viewBoxDimensions[2]);\n    svg.setAttribute('height', viewBoxDimensions[3]);\n  }\n\n  if (styleTag && styleTag.tagName === 'style') {\n    styleTag.remove();\n  }\n};\n/**\n * @explorer-desc\n * A component for rendering Excalidraw elements as a static image\n */\n\n\nfunction ExcalidrawImage(_ref) {\n  var _Svg$outerHTML;\n\n  var elements = _ref.elements,\n      imageContainerRef = _ref.imageContainerRef,\n      _ref$appState = _ref.appState,\n      appState = _ref$appState === void 0 ? null : _ref$appState,\n      _ref$rootClassName = _ref.rootClassName,\n      rootClassName = _ref$rootClassName === void 0 ? null : _ref$rootClassName;\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),\n      Svg = _useState[0],\n      setSvg = _useState[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    var setContent = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var svg;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return (0,_excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0__.exportToSvg)({\n                  elements: elements,\n                  files: null\n                });\n\n              case 2:\n                svg = _context.sent;\n                removeStyleFromSvg_HACK(svg);\n                svg.setAttribute('width', '100%');\n                svg.setAttribute('height', '100%');\n                svg.setAttribute('display', 'block');\n                setSvg(svg);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function setContent() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    setContent();\n  }, [elements, appState]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", {\n    ref: imageContainerRef,\n    className: rootClassName !== null && rootClassName !== void 0 ? rootClassName : '',\n    dangerouslySetInnerHTML: {\n      __html: (_Svg$outerHTML = Svg === null || Svg === void 0 ? void 0 : Svg.outerHTML) !== null && _Svg$outerHTML !== void 0 ? _Svg$outerHTML : ''\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xleGljYWxFZGl0b3Ivbm9kZXMvRXhjYWxpZHJhd05vZGUvRXhjYWxpZHJhd0ltYWdlLnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OzsrQ0FDQTs7Ozs7O0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7OztBQXVDQTtBQUNBO0FBQ0EsSUFBTUksdUJBQXVCLEdBQUcsU0FBMUJBLHVCQUEwQixDQUFDQyxHQUFELEVBQXFCO0VBQUE7O0VBQ25ELElBQU1DLFFBQVEsR0FBR0QsR0FBSCxhQUFHQSxHQUFILGdEQUFHQSxHQUFHLENBQUVFLGlCQUFSLDBEQUFHLHNCQUF3QkEsaUJBQXpDLENBRG1ELENBR25EO0VBQ0E7O0VBQ0EsSUFBTUMsT0FBTyxHQUFHSCxHQUFHLENBQUNJLFlBQUosQ0FBaUIsU0FBakIsQ0FBaEI7O0VBQ0EsSUFBSUQsT0FBTyxJQUFJLElBQWYsRUFBcUI7SUFDbkIsSUFBTUUsaUJBQWlCLEdBQUdGLE9BQU8sQ0FBQ0csS0FBUixDQUFjLEdBQWQsQ0FBMUI7SUFDQU4sR0FBRyxDQUFDTyxZQUFKLENBQWlCLE9BQWpCLEVBQTBCRixpQkFBaUIsQ0FBQyxDQUFELENBQTNDO0lBQ0FMLEdBQUcsQ0FBQ08sWUFBSixDQUFpQixRQUFqQixFQUEyQkYsaUJBQWlCLENBQUMsQ0FBRCxDQUE1QztFQUNEOztFQUVELElBQUlKLFFBQVEsSUFBSUEsUUFBUSxDQUFDTyxPQUFULEtBQXFCLE9BQXJDLEVBQThDO0lBQzVDUCxRQUFRLENBQUNRLE1BQVQ7RUFDRDtBQUNGLENBZkQ7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7OztBQUNlLFNBQVNDLGVBQVQsT0FLUTtFQUFBOztFQUFBLElBSnJCQyxRQUlxQixRQUpyQkEsUUFJcUI7RUFBQSxJQUhyQkMsaUJBR3FCLFFBSHJCQSxpQkFHcUI7RUFBQSx5QkFGckJDLFFBRXFCO0VBQUEsSUFGckJBLFFBRXFCLDhCQUZWLElBRVU7RUFBQSw4QkFEckJDLGFBQ3FCO0VBQUEsSUFEckJBLGFBQ3FCLG1DQURMLElBQ0s7O0VBQ3JCLGdCQUFzQmhCLCtDQUFRLENBQW9CLElBQXBCLENBQTlCO0VBQUEsSUFBT2lCLEdBQVA7RUFBQSxJQUFZQyxNQUFaOztFQUVBbkIsZ0RBQVMsQ0FBQyxZQUFNO0lBQ2QsSUFBTW9CLFVBQVU7TUFBQSx1RUFBRztRQUFBO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUE7Z0JBQUEsT0FDYXRCLG1FQUFXLENBQUM7a0JBQ3hDZ0IsUUFBUSxFQUFSQSxRQUR3QztrQkFFeENPLEtBQUssRUFBRTtnQkFGaUMsQ0FBRCxDQUR4Qjs7Y0FBQTtnQkFDWGxCLEdBRFc7Z0JBS2pCRCx1QkFBdUIsQ0FBQ0MsR0FBRCxDQUF2QjtnQkFFQUEsR0FBRyxDQUFDTyxZQUFKLENBQWlCLE9BQWpCLEVBQTBCLE1BQTFCO2dCQUNBUCxHQUFHLENBQUNPLFlBQUosQ0FBaUIsUUFBakIsRUFBMkIsTUFBM0I7Z0JBQ0FQLEdBQUcsQ0FBQ08sWUFBSixDQUFpQixTQUFqQixFQUE0QixPQUE1QjtnQkFFQVMsTUFBTSxDQUFDaEIsR0FBRCxDQUFOOztjQVhpQjtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQ0FBSDs7TUFBQSxnQkFBVmlCLFVBQVU7UUFBQTtNQUFBO0lBQUEsR0FBaEI7O0lBYUFBLFVBQVU7RUFDWCxDQWZRLEVBZU4sQ0FBQ04sUUFBRCxFQUFXRSxRQUFYLENBZk0sQ0FBVDtFQWlCQSxvQkFDRTtJQUNFLEdBQUcsRUFBRUQsaUJBRFA7SUFFRSxTQUFTLEVBQUVFLGFBQUYsYUFBRUEsYUFBRixjQUFFQSxhQUFGLEdBQW1CLEVBRjlCO0lBR0UsdUJBQXVCLEVBQUU7TUFBQ0ssTUFBTSxvQkFBRUosR0FBRixhQUFFQSxHQUFGLHVCQUFFQSxHQUFHLENBQUVLLFNBQVAsMkRBQW9CO0lBQTNCO0VBSDNCLEVBREY7QUFPRCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jsb2ctdWkvLi9jb21wb25lbnRzL0xleGljYWxFZGl0b3Ivbm9kZXMvRXhjYWxpZHJhd05vZGUvRXhjYWxpZHJhd0ltYWdlLnRzeD9mZTc2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuaW1wb3J0IHtleHBvcnRUb1N2Z30gZnJvbSAnQGV4Y2FsaWRyYXcvZXhjYWxpZHJhdyc7XG5pbXBvcnQge1xuICBFeGNhbGlkcmF3RWxlbWVudCxcbiAgTm9uRGVsZXRlZCxcbn0gZnJvbSAnQGV4Y2FsaWRyYXcvZXhjYWxpZHJhdy90eXBlcy9lbGVtZW50L3R5cGVzJztcbmltcG9ydCB7QXBwU3RhdGV9IGZyb20gJ0BleGNhbGlkcmF3L2V4Y2FsaWRyYXcvdHlwZXMvdHlwZXMnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5cbnR5cGUgSW1hZ2VUeXBlID0gJ3N2ZycgfCAnY2FudmFzJztcblxudHlwZSBQcm9wcyA9IHtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZXMgdGhlIGV4cG9ydCBzZXR0aW5nIGZvciBTVkcvQ2FudmFzXG4gICAqL1xuICBhcHBTdGF0ZT86IFBhcnRpYWw8T21pdDxBcHBTdGF0ZSwgJ29mZnNldFRvcCcgfCAnb2Zmc2V0TGVmdCc+PiB8IG51bGw7XG4gIC8qKlxuICAgKiBUaGUgY3NzIGNsYXNzIGFwcGxpZWQgdG8gaW1hZ2UgdG8gYmUgcmVuZGVyZWRcbiAgICovXG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBFeGNhbGlkcmF3IGVsZW1lbnRzIHRvIGJlIHJlbmRlcmVkIGFzIGFuIGltYWdlXG4gICAqL1xuICBlbGVtZW50czogTm9uRGVsZXRlZDxFeGNhbGlkcmF3RWxlbWVudD5bXTtcbiAgLyoqXG4gICAqIFRoZSBoZWlnaHQgb2YgdGhlIGltYWdlIHRvIGJlIHJlbmRlcmVkXG4gICAqL1xuICBoZWlnaHQ/OiBudW1iZXIgfCBudWxsO1xuICAvKipcbiAgICogVGhlIHJlZiBvYmplY3QgdG8gYmUgdXNlZCB0byByZW5kZXIgdGhlIGltYWdlXG4gICAqL1xuICBpbWFnZUNvbnRhaW5lclJlZjoge2N1cnJlbnQ6IG51bGwgfCBIVE1MRGl2RWxlbWVudH07XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBpbWFnZSB0byBiZSByZW5kZXJlZFxuICAgKi9cbiAgaW1hZ2VUeXBlPzogSW1hZ2VUeXBlO1xuICAvKipcbiAgICogVGhlIGNzcyBjbGFzcyBhcHBsaWVkIHRvIHRoZSByb290IGVsZW1lbnQgb2YgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIHJvb3RDbGFzc05hbWU/OiBzdHJpbmcgfCBudWxsO1xuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBpbWFnZSB0byBiZSByZW5kZXJlZFxuICAgKi9cbiAgd2lkdGg/OiBudW1iZXIgfCBudWxsO1xufTtcblxuLy8gZXhwb3J0VG9TdmcgaGFzIGZvbnRzIGZyb20gZXhjYWxpZHJhdy5jb21cbi8vIFdlIGRvbid0IHdhbnQgdGhlbSB0byBiZSB1c2VkIGluIG9wZW4gc291cmNlXG5jb25zdCByZW1vdmVTdHlsZUZyb21TdmdfSEFDSyA9IChzdmc6IFNWR0VsZW1lbnQpID0+IHtcbiAgY29uc3Qgc3R5bGVUYWcgPSBzdmc/LmZpcnN0RWxlbWVudENoaWxkPy5maXJzdEVsZW1lbnRDaGlsZDtcblxuICAvLyBHZW5lcmF0ZWQgU1ZHIGlzIGdldHRpbmcgZG91YmxlLXNpemVkIGJ5IGhlaWdodCBhbmQgd2lkdGggYXR0cmlidXRlc1xuICAvLyBXZSB3YW50IHRvIG1hdGNoIHRoZSByZWFsIHNpemUgb2YgdGhlIFNWRyBlbGVtZW50XG4gIGNvbnN0IHZpZXdCb3ggPSBzdmcuZ2V0QXR0cmlidXRlKCd2aWV3Qm94Jyk7XG4gIGlmICh2aWV3Qm94ICE9IG51bGwpIHtcbiAgICBjb25zdCB2aWV3Qm94RGltZW5zaW9ucyA9IHZpZXdCb3guc3BsaXQoJyAnKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHZpZXdCb3hEaW1lbnNpb25zWzJdKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCB2aWV3Qm94RGltZW5zaW9uc1szXSk7XG4gIH1cblxuICBpZiAoc3R5bGVUYWcgJiYgc3R5bGVUYWcudGFnTmFtZSA9PT0gJ3N0eWxlJykge1xuICAgIHN0eWxlVGFnLnJlbW92ZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIEBleHBsb3Jlci1kZXNjXG4gKiBBIGNvbXBvbmVudCBmb3IgcmVuZGVyaW5nIEV4Y2FsaWRyYXcgZWxlbWVudHMgYXMgYSBzdGF0aWMgaW1hZ2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRXhjYWxpZHJhd0ltYWdlKHtcbiAgZWxlbWVudHMsXG4gIGltYWdlQ29udGFpbmVyUmVmLFxuICBhcHBTdGF0ZSA9IG51bGwsXG4gIHJvb3RDbGFzc05hbWUgPSBudWxsLFxufTogUHJvcHMpOiBKU1guRWxlbWVudCB7XG4gIGNvbnN0IFtTdmcsIHNldFN2Z10gPSB1c2VTdGF0ZTxTVkdFbGVtZW50IHwgbnVsbD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzZXRDb250ZW50ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3ZnOiBTVkdFbGVtZW50ID0gYXdhaXQgZXhwb3J0VG9Tdmcoe1xuICAgICAgICBlbGVtZW50cyxcbiAgICAgICAgZmlsZXM6IG51bGwsXG4gICAgICB9KTtcbiAgICAgIHJlbW92ZVN0eWxlRnJvbVN2Z19IQUNLKHN2Zyk7XG5cbiAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzEwMCUnKTtcbiAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcxMDAlJyk7XG4gICAgICBzdmcuc2V0QXR0cmlidXRlKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG5cbiAgICAgIHNldFN2ZyhzdmcpO1xuICAgIH07XG4gICAgc2V0Q29udGVudCgpO1xuICB9LCBbZWxlbWVudHMsIGFwcFN0YXRlXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2ltYWdlQ29udGFpbmVyUmVmfVxuICAgICAgY2xhc3NOYW1lPXtyb290Q2xhc3NOYW1lID8/ICcnfVxuICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IFN2Zz8ub3V0ZXJIVE1MID8/ICcnfX1cbiAgICAvPlxuICApO1xufVxuIl0sIm5hbWVzIjpbImV4cG9ydFRvU3ZnIiwiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInJlbW92ZVN0eWxlRnJvbVN2Z19IQUNLIiwic3ZnIiwic3R5bGVUYWciLCJmaXJzdEVsZW1lbnRDaGlsZCIsInZpZXdCb3giLCJnZXRBdHRyaWJ1dGUiLCJ2aWV3Qm94RGltZW5zaW9ucyIsInNwbGl0Iiwic2V0QXR0cmlidXRlIiwidGFnTmFtZSIsInJlbW92ZSIsIkV4Y2FsaWRyYXdJbWFnZSIsImVsZW1lbnRzIiwiaW1hZ2VDb250YWluZXJSZWYiLCJhcHBTdGF0ZSIsInJvb3RDbGFzc05hbWUiLCJTdmciLCJzZXRTdmciLCJzZXRDb250ZW50IiwiZmlsZXMiLCJfX2h0bWwiLCJvdXRlckhUTUwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawImage.tsx\n");

/***/ }),

/***/ "./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawModal.tsx":
/*!***************************************************************************!*\
  !*** ./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawModal.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ExcalidrawModal)\n/* harmony export */ });\n/* harmony import */ var _excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @excalidraw/excalidraw */ \"@excalidraw/excalidraw\");\n/* harmony import */ var _excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _ui_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../ui/Button */ \"./components/LexicalEditor/ui/Button.tsx\");\n/* harmony import */ var _ui_Modal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../ui/Modal */ \"./components/LexicalEditor/ui/Modal.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);\nvar _jsxFileName = \"/home/songliansheng/projects/blog-ui/components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawModal.tsx\";\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\n\n\n\n\n\n\n\n/**\n * @explorer-desc\n * A component which renders a modal with Excalidraw (a painting app)\n * which can be used to export an editable image\n */\nfunction ExcalidrawModal(_ref) {\n  var _ref$closeOnClickOuts = _ref.closeOnClickOutside,\n      closeOnClickOutside = _ref$closeOnClickOuts === void 0 ? false : _ref$closeOnClickOuts,\n      onSave = _ref.onSave,\n      initialElements = _ref.initialElements,\n      _ref$isShown = _ref.isShown,\n      isShown = _ref$isShown === void 0 ? false : _ref$isShown,\n      onDelete = _ref.onDelete;\n  var excaliDrawModelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false),\n      discardModalOpen = _useState[0],\n      setDiscardModalOpen = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialElements),\n      elements = _useState2[0],\n      setElements = _useState2[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    if (excaliDrawModelRef.current !== null) {\n      excaliDrawModelRef.current.focus();\n    }\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    var modalOverlayElement = null;\n\n    var clickOutsideHandler = function clickOutsideHandler(event) {\n      var target = event.target;\n\n      if (excaliDrawModelRef.current !== null && !excaliDrawModelRef.current.contains(target) && closeOnClickOutside) {\n        onDelete();\n      }\n    };\n\n    if (excaliDrawModelRef.current !== null) {\n      var _excaliDrawModelRef$c;\n\n      modalOverlayElement = (_excaliDrawModelRef$c = excaliDrawModelRef.current) === null || _excaliDrawModelRef$c === void 0 ? void 0 : _excaliDrawModelRef$c.parentElement;\n\n      if (modalOverlayElement !== null) {\n        var _modalOverlayElement;\n\n        (_modalOverlayElement = modalOverlayElement) === null || _modalOverlayElement === void 0 ? void 0 : _modalOverlayElement.addEventListener('click', clickOutsideHandler);\n      }\n    }\n\n    return function () {\n      if (modalOverlayElement !== null) {\n        var _modalOverlayElement2;\n\n        (_modalOverlayElement2 = modalOverlayElement) === null || _modalOverlayElement2 === void 0 ? void 0 : _modalOverlayElement2.removeEventListener('click', clickOutsideHandler);\n      }\n    };\n  }, [closeOnClickOutside, onDelete]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(function () {\n    var currentModalRef = excaliDrawModelRef.current;\n\n    var onKeyDown = function onKeyDown(event) {\n      onDelete();\n    };\n\n    if (currentModalRef !== null) {\n      currentModalRef.addEventListener('keydown', onKeyDown);\n    }\n\n    return function () {\n      if (currentModalRef !== null) {\n        currentModalRef.removeEventListener('keydown', onKeyDown);\n      }\n    };\n  }, [elements, onDelete]);\n\n  var save = function save() {\n    if (elements.filter(function (el) {\n      return !el.isDeleted;\n    }).length > 0) {\n      onSave(elements);\n    } else {\n      // delete node if the scene is clear\n      onDelete();\n    }\n  };\n\n  var discard = function discard() {\n    if (elements.filter(function (el) {\n      return !el.isDeleted;\n    }).length === 0) {\n      // delete node if the scene is clear\n      onDelete();\n    } else {\n      //Otherwise, show confirmation dialog before closing\n      setDiscardModalOpen(true);\n    }\n  };\n\n  function ShowDiscardDialog() {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_ui_Modal__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n      title: \"Discard\",\n      onClose: function onClose() {\n        setDiscardModalOpen(false);\n      },\n      closeOnClickOutside: true,\n      children: [\"Are you sure you want to discard the changes?\", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"div\", {\n        className: \"ExcalidrawModal__discardModal\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n          onClick: function onClick() {\n            setDiscardModalOpen(false);\n            onDelete();\n          },\n          children: \"Discard\"\n        }), ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n          onClick: function onClick() {\n            setDiscardModalOpen(false);\n          },\n          children: \"Cancel\"\n        })]\n      })]\n    });\n  }\n\n  if (isShown === false) {\n    return null;\n  }\n\n  var onChange = function onChange(els) {\n    setElements(els);\n  }; // This is a hacky work-around for Excalidraw + Vite.\n  // In DEV, Vite pulls this in fine, in prod it doesn't. It seems\n  // like a module resolution issue with ESM vs CJS?\n\n\n  var _Excalidraw = (_excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0___default().$$typeof) != null ? (_excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0___default()) : (_excalidraw_excalidraw__WEBPACK_IMPORTED_MODULE_0___default()[\"default\"]);\n\n  return /*#__PURE__*/(0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)( /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    className: \"ExcalidrawModal__overlay\",\n    role: \"dialog\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n      className: \"ExcalidrawModal__modal\",\n      ref: excaliDrawModelRef,\n      tabIndex: -1,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"div\", {\n        className: \"ExcalidrawModal__row\",\n        children: [discardModalOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ShowDiscardDialog, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Excalidraw, {\n          onChange: onChange,\n          initialData: {\n            appState: {\n              isLoading: false\n            },\n            elements: initialElements\n          }\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"div\", {\n          className: \"ExcalidrawModal__actions\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"button\", {\n            className: \"action-button\",\n            onClick: discard,\n            children: \"Discard\"\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"button\", {\n            className: \"action-button\",\n            onClick: save,\n            children: \"Save\"\n          })]\n        })]\n      })\n    })\n  }), document.body);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xleGljYWxFZGl0b3Ivbm9kZXMvRXhjYWxpZHJhd05vZGUvRXhjYWxpZHJhd01vZGFsLnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7OztBQTBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsU0FBU1MsZUFBVCxPQU1lO0VBQUEsaUNBTDVCQyxtQkFLNEI7RUFBQSxJQUw1QkEsbUJBSzRCLHNDQUxOLEtBS007RUFBQSxJQUo1QkMsTUFJNEIsUUFKNUJBLE1BSTRCO0VBQUEsSUFINUJDLGVBRzRCLFFBSDVCQSxlQUc0QjtFQUFBLHdCQUY1QkMsT0FFNEI7RUFBQSxJQUY1QkEsT0FFNEIsNkJBRmxCLEtBRWtCO0VBQUEsSUFENUJDLFFBQzRCLFFBRDVCQSxRQUM0QjtFQUM1QixJQUFNQyxrQkFBa0IsR0FBR1gsNkNBQU0sQ0FBd0IsSUFBeEIsQ0FBakM7O0VBRUEsZ0JBQWdEQywrQ0FBUSxDQUFDLEtBQUQsQ0FBeEQ7RUFBQSxJQUFPVyxnQkFBUDtFQUFBLElBQXlCQyxtQkFBekI7O0VBQ0EsaUJBQ0VaLCtDQUFRLENBQTJDTyxlQUEzQyxDQURWO0VBQUEsSUFBT00sUUFBUDtFQUFBLElBQWlCQyxXQUFqQjs7RUFHQWpCLGdEQUFTLENBQUMsWUFBTTtJQUNkLElBQUlhLGtCQUFrQixDQUFDSyxPQUFuQixLQUErQixJQUFuQyxFQUF5QztNQUN2Q0wsa0JBQWtCLENBQUNLLE9BQW5CLENBQTJCQyxLQUEzQjtJQUNEO0VBQ0YsQ0FKUSxFQUlOLEVBSk0sQ0FBVDtFQU1BbkIsZ0RBQVMsQ0FBQyxZQUFNO0lBQ2QsSUFBSW9CLG1CQUF1QyxHQUFHLElBQTlDOztJQUVBLElBQU1DLG1CQUFtQixHQUFHLFNBQXRCQSxtQkFBc0IsQ0FBQ0MsS0FBRCxFQUF1QjtNQUNqRCxJQUFNQyxNQUFNLEdBQUdELEtB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QmEsUUFBUSxDQUFDQyxJQTFCUSxDQUFuQjtBQTRCRCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jsb2ctdWkvLi9jb21wb25lbnRzL0xleGljYWxFZGl0b3Ivbm9kZXMvRXhjYWxpZHJhd05vZGUvRXhjYWxpZHJhd01vZGFsLnRzeD8xNjI5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuaW1wb3J0ICcuL0V4Y2FsaWRyYXdNb2RhbC5tb2R1bGUuY3NzJ1xuXG5pbXBvcnQgRXhjYWxpZHJhdyBmcm9tICdAZXhjYWxpZHJhdy9leGNhbGlkcmF3JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7UmVhY3RQb3J0YWwsIHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge2NyZWF0ZVBvcnRhbH0gZnJvbSAncmVhY3QtZG9tJztcblxuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi8uLi91aS9CdXR0b24nO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4uLy4uL3VpL01vZGFsJztcblxuZXhwb3J0IHR5cGUgRXhjYWxpZHJhd0VsZW1lbnRGcmFnbWVudCA9IHtcbiAgaXNEZWxldGVkPzogYm9vbGVhbjtcbn07XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGNsb3NlT25DbGlja091dHNpZGU/OiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIGluaXRpYWwgc2V0IG9mIGVsZW1lbnRzIHRvIGRyYXcgaW50byB0aGUgc2NlbmVcbiAgICovXG4gIGluaXRpYWxFbGVtZW50czogUmVhZG9ubHlBcnJheTxFeGNhbGlkcmF3RWxlbWVudEZyYWdtZW50PjtcbiAgLyoqXG4gICAqIENvbnRyb2xzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBtb2RhbFxuICAgKi9cbiAgaXNTaG93bj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBDb21wbGV0ZWx5IHJlbW92ZSBFeGNhbGlkcmF3IGNvbXBvbmVudFxuICAgKi9cbiAgb25EZWxldGU6ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIHRoZSBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAqL1xuICBvblNhdmU6IChlbGVtZW50czogUmVhZG9ubHlBcnJheTxFeGNhbGlkcmF3RWxlbWVudEZyYWdtZW50PikgPT4gdm9pZDtcbn07XG5cbi8qKlxuICogQGV4cGxvcmVyLWRlc2NcbiAqIEEgY29tcG9uZW50IHdoaWNoIHJlbmRlcnMgYSBtb2RhbCB3aXRoIEV4Y2FsaWRyYXcgKGEgcGFpbnRpbmcgYXBwKVxuICogd2hpY2ggY2FuIGJlIHVzZWQgdG8gZXhwb3J0IGFuIGVkaXRhYmxlIGltYWdlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEV4Y2FsaWRyYXdNb2RhbCh7XG4gIGNsb3NlT25DbGlja091dHNpZGUgPSBmYWxzZSxcbiAgb25TYXZlLFxuICBpbml0aWFsRWxlbWVudHMsXG4gIGlzU2hvd24gPSBmYWxzZSxcbiAgb25EZWxldGUsXG59OiBQcm9wcyk6IFJlYWN0UG9ydGFsIHwgbnVsbCB7XG4gIGNvbnN0IGV4Y2FsaURyYXdNb2RlbFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudCB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFtkaXNjYXJkTW9kYWxPcGVuLCBzZXREaXNjYXJkTW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2VsZW1lbnRzLCBzZXRFbGVtZW50c10gPVxuICAgIHVzZVN0YXRlPFJlYWRvbmx5QXJyYXk8RXhjYWxpZHJhd0VsZW1lbnRGcmFnbWVudD4+KGluaXRpYWxFbGVtZW50cyk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZXhjYWxpRHJhd01vZGVsUmVmLmN1cnJlbnQgIT09IG51bGwpIHtcbiAgICAgIGV4Y2FsaURyYXdNb2RlbFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbW9kYWxPdmVybGF5RWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0IGNsaWNrT3V0c2lkZUhhbmRsZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIGlmIChcbiAgICAgICAgZXhjYWxpRHJhd01vZGVsUmVmLmN1cnJlbnQgIT09IG51bGwgJiZcbiAgICAgICAgIWV4Y2FsaURyYXdNb2RlbFJlZi5jdXJyZW50LmNvbnRhaW5zKHRhcmdldCBhcyBOb2RlKSAmJlxuICAgICAgICBjbG9zZU9uQ2xpY2tPdXRzaWRlXG4gICAgICApIHtcbiAgICAgICAgb25EZWxldGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGV4Y2FsaURyYXdNb2RlbFJlZi5jdXJyZW50ICE9PSBudWxsKSB7XG4gICAgICBtb2RhbE92ZXJsYXlFbGVtZW50ID0gZXhjYWxpRHJhd01vZGVsUmVmLmN1cnJlbnQ/LnBhcmVudEVsZW1lbnQ7XG4gICAgICBpZiAobW9kYWxPdmVybGF5RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICBtb2RhbE92ZXJsYXlFbGVtZW50Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZUhhbmRsZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAobW9kYWxPdmVybGF5RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICBtb2RhbE92ZXJsYXlFbGVtZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZUhhbmRsZXIpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtjbG9zZU9uQ2xpY2tPdXRzaWRlLCBvbkRlbGV0ZV0pO1xuXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY3VycmVudE1vZGFsUmVmID0gZXhjYWxpRHJhd01vZGVsUmVmLmN1cnJlbnQ7XG5cbiAgICBjb25zdCBvbktleURvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIG9uRGVsZXRlKCk7XG4gICAgfTtcblxuICAgIGlmIChjdXJyZW50TW9kYWxSZWYgIT09IG51bGwpIHtcbiAgICAgIGN1cnJlbnRNb2RhbFJlZi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGN1cnJlbnRNb2RhbFJlZiAhPT0gbnVsbCkge1xuICAgICAgICBjdXJyZW50TW9kYWxSZWYucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2VsZW1lbnRzLCBvbkRlbGV0ZV0pO1xuXG4gIGNvbnN0IHNhdmUgPSAoKSA9PiB7XG4gICAgaWYgKGVsZW1lbnRzLmZpbHRlcigoZWwpID0+ICFlbC5pc0RlbGV0ZWQpLmxlbmd0aCA+IDApIHtcbiAgICAgIG9uU2F2ZShlbGVtZW50cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGRlbGV0ZSBub2RlIGlmIHRoZSBzY2VuZSBpcyBjbGVhclxuICAgICAgb25EZWxldGUoKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZGlzY2FyZCA9ICgpID0+IHtcbiAgICBpZiAoZWxlbWVudHMuZmlsdGVyKChlbCkgPT4gIWVsLmlzRGVsZXRlZCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBkZWxldGUgbm9kZSBpZiB0aGUgc2NlbmUgaXMgY2xlYXJcbiAgICAgIG9uRGVsZXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vT3RoZXJ3aXNlLCBzaG93IGNvbmZpcm1hdGlvbiBkaWFsb2cgYmVmb3JlIGNsb3NpbmdcbiAgICAgIHNldERpc2NhcmRNb2RhbE9wZW4odHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIFNob3dEaXNjYXJkRGlhbG9nKCk6IEpTWC5FbGVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPVwiRGlzY2FyZFwiXG4gICAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgICBzZXREaXNjYXJkTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgY2xvc2VPbkNsaWNrT3V0c2lkZT17dHJ1ZX0+XG4gICAgICAgIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkaXNjYXJkIHRoZSBjaGFuZ2VzP1xuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIkV4Y2FsaWRyYXdNb2RhbF9fZGlzY2FyZE1vZGFsXCI+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICBzZXREaXNjYXJkTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgb25EZWxldGUoKTtcbiAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgRGlzY2FyZFxuICAgICAgICAgIDwvQnV0dG9uPnsnICd9XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICBzZXREaXNjYXJkTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICApO1xuICB9XG5cbiAgaWYgKGlzU2hvd24gPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBvbkNoYW5nZSA9IChlbHM6IFJlYWRvbmx5QXJyYXk8RXhjYWxpZHJhd0VsZW1lbnRGcmFnbWVudD4pID0+IHtcbiAgICBzZXRFbGVtZW50cyhlbHMpO1xuICB9O1xuXG4gIC8vIFRoaXMgaXMgYSBoYWNreSB3b3JrLWFyb3VuZCBmb3IgRXhjYWxpZHJhdyArIFZpdGUuXG4gIC8vIEluIERFViwgVml0ZSBwdWxscyB0aGlzIGluIGZpbmUsIGluIHByb2QgaXQgZG9lc24ndC4gSXQgc2VlbXNcbiAgLy8gbGlrZSBhIG1vZHVsZSByZXNvbHV0aW9uIGlzc3VlIHdpdGggRVNNIHZzIENKUz9cbiAgY29uc3QgX0V4Y2FsaWRyYXcgPVxuICAgIEV4Y2FsaWRyYXcuJCR0eXBlb2YgIT0gbnVsbCA/IEV4Y2FsaWRyYXcgOiBFeGNhbGlkcmF3LmRlZmF1bHQ7XG5cbiAgcmV0dXJuIGNyZWF0ZVBvcnRhbChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIkV4Y2FsaWRyYXdNb2RhbF9fb3ZlcmxheVwiIHJvbGU9XCJkaWFsb2dcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwiRXhjYWxpZHJhd01vZGFsX19tb2RhbFwiXG4gICAgICAgIHJlZj17ZXhjYWxpRHJhd01vZGVsUmVmfVxuICAgICAgICB0YWJJbmRleD17LTF9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIkV4Y2FsaWRyYXdNb2RhbF9fcm93XCI+XG4gICAgICAgICAge2Rpc2NhcmRNb2RhbE9wZW4gJiYgPFNob3dEaXNjYXJkRGlhbG9nIC8+fVxuICAgICAgICAgIDxfRXhjYWxpZHJhd1xuICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgaW5pdGlhbERhdGE9e3tcbiAgICAgICAgICAgICAgYXBwU3RhdGU6IHtpc0xvYWRpbmc6IGZhbHNlfSxcbiAgICAgICAgICAgICAgZWxlbWVudHM6IGluaXRpYWxFbGVtZW50cyxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIkV4Y2FsaWRyYXdNb2RhbF9fYWN0aW9uc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJhY3Rpb24tYnV0dG9uXCIgb25DbGljaz17ZGlzY2FyZH0+XG4gICAgICAgICAgICAgIERpc2NhcmRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJhY3Rpb24tYnV0dG9uXCIgb25DbGljaz17c2F2ZX0+XG4gICAgICAgICAgICAgIFNhdmVcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PixcbiAgICBkb2N1bWVudC5ib2R5LFxuICApO1xufVxuIl0sIm5hbWVzIjpbIkV4Y2FsaWRyYXciLCJSZWFjdCIsInVzZUVmZmVjdCIsInVzZUxheW91dEVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiY3JlYXRlUG9ydGFsIiwiQnV0dG9uIiwiTW9kYWwiLCJFeGNhbGlkcmF3TW9kYWwiLCJjbG9zZU9uQ2xpY2tPdXRzaWRlIiwib25TYXZlIiwiaW5pdGlhbEVsZW1lbnRzIiwiaXNTaG93biIsIm9uRGVsZXRlIiwiZXhjYWxpRHJhd01vZGVsUmVmIiwiZGlzY2FyZE1vZGFsT3BlbiIsInNldERpc2NhcmRNb2RhbE9wZW4iLCJlbGVtZW50cyIsInNldEVsZW1lbnRzIiwiY3VycmVudCIsImZvY3VzIiwibW9kYWxPdmVybGF5RWxlbWVudCIsImNsaWNrT3V0c2lkZUhhbmRsZXIiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwicGFyZW50RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY3VycmVudE1vZGFsUmVmIiwib25LZXlEb3duIiwic2F2ZSIsImZpbHRlciIsImVsIiwiaXNEZWxldGVkIiwibGVuZ3RoIiwiZGlzY2FyZCIsIlNob3dEaXNjYXJkRGlhbG9nIiwib25DaGFuZ2UiLCJlbHMiLCJfRXhjYWxpZHJhdyIsIiQkdHlwZW9mIiwiYXBwU3RhdGUiLCJpc0xvYWRpbmciLCJkb2N1bWVudCIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/LexicalEditor/nodes/ExcalidrawNode/ExcalidrawModal.tsx\n");

/***/ }),

/***/ "./components/LexicalEditor/ui/ImageResizer.tsx":
/*!******************************************************!*\
  !*** ./components/LexicalEditor/ui/ImageResizer.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ImageResizer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);\nvar _jsxFileName = \"/home/songliansheng/projects/blog-ui/components/LexicalEditor/ui/ImageResizer.tsx\";\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\n\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nvar Direction = {\n  east: 1 << 0,\n  north: 1 << 3,\n  south: 1 << 1,\n  west: 1 << 2\n};\nfunction ImageResizer(_ref) {\n  var onResizeStart = _ref.onResizeStart,\n      onResizeEnd = _ref.onResizeEnd,\n      buttonRef = _ref.buttonRef,\n      imageRef = _ref.imageRef,\n      maxWidth = _ref.maxWidth,\n      editor = _ref.editor,\n      showCaption = _ref.showCaption,\n      setShowCaption = _ref.setShowCaption,\n      captionsEnabled = _ref.captionsEnabled;\n  var controlWrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var userSelect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n    priority: '',\n    value: 'default'\n  });\n  var positioningRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n    currentHeight: 0,\n    currentWidth: 0,\n    direction: 0,\n    isResizing: false,\n    ratio: 0,\n    startHeight: 0,\n    startWidth: 0,\n    startX: 0,\n    startY: 0\n  });\n  var editorRootElement = editor.getRootElement(); // Find max width, accounting for editor padding.\n\n  var maxWidthContainer = maxWidth ? maxWidth : editorRootElement !== null ? editorRootElement.getBoundingClientRect().width - 20 : 100;\n  var maxHeightContainer = editorRootElement !== null ? editorRootElement.getBoundingClientRect().height - 20 : 100;\n  var minWidth = 100;\n  var minHeight = 100;\n\n  var setStartCursor = function setStartCursor(direction) {\n    var ew = direction === Direction.east || direction === Direction.west;\n    var ns = direction === Direction.north || direction === Direction.south;\n    var nwse = direction & Direction.north && direction & Direction.west || direction & Direction.south && direction & Direction.east;\n    var cursorDir = ew ? 'ew' : ns ? 'ns' : nwse ? 'nwse' : 'nesw';\n\n    if (editorRootElement !== null) {\n      editorRootElement.style.setProperty('cursor', \"\".concat(cursorDir, \"-resize\"), 'important');\n    }\n\n    if (document.body !== null) {\n      document.body.style.setProperty('cursor', \"\".concat(cursorDir, \"-resize\"), 'important');\n      userSelect.current.value = document.body.style.getPropertyValue('-webkit-user-select');\n      userSelect.current.priority = document.body.style.getPropertyPriority('-webkit-user-select');\n      document.body.style.setProperty('-webkit-user-select', \"none\", 'important');\n    }\n  };\n\n  var setEndCursor = function setEndCursor() {\n    if (editorRootElement !== null) {\n      editorRootElement.style.setProperty('cursor', 'default');\n    }\n\n    if (document.body !== null) {\n      document.body.style.setProperty('cursor', 'default');\n      document.body.style.setProperty('-webkit-user-select', userSelect.current.value, userSelect.current.priority);\n    }\n  };\n\n  var handlePointerDown = function handlePointerDown(event, direction) {\n    if (!editor.isEditable()) {\n      return;\n    }\n\n    var image = imageRef.current;\n    var controlWrapper = controlWrapperRef.current;\n\n    if (image !== null && controlWrapper !== null) {\n      var _image$getBoundingCli = image.getBoundingClientRect(),\n          _width = _image$getBoundingCli.width,\n          _height = _image$getBoundingCli.height;\n\n      var positioning = positioningRef.current;\n      positioning.startWidth = _width;\n      positioning.startHeight = _height;\n      positioning.ratio = _width / _height;\n      positioning.currentWidth = _width;\n      positioning.currentHeight = _height;\n      positioning.startX = event.clientX;\n      positioning.startY = event.clientY;\n      positioning.isResizing = true;\n      positioning.direction = direction;\n      setStartCursor(direction);\n      onResizeStart();\n      controlWrapper.classList.add('image-control-wrapper--resizing');\n      image.style.height = \"\".concat(_height, \"px\");\n      image.style.width = \"\".concat(_width, \"px\");\n      document.addEventListener('pointermove', handlePointerMove);\n      document.addEventListener('pointerup', handlePointerUp);\n    }\n  };\n\n  var handlePointerMove = function handlePointerMove(event) {\n    var image = imageRef.current;\n    var positioning = positioningRef.current;\n    var isHorizontal = positioning.direction & (Direction.east | Direction.west);\n    var isVertical = positioning.direction & (Direction.south | Direction.north);\n\n    if (image !== null && positioning.isResizing) {\n      // Corner cursor\n      if (isHorizontal && isVertical) {\n        var diff = Math.floor(positioning.startX - event.clientX);\n        diff = positioning.direction & Direction.east ? -diff : diff;\n\n        var _width2 = clamp(positioning.startWidth + diff, minWidth, maxWidthContainer);\n\n        var _height2 = _width2 / positioning.ratio;\n\n        image.style.width = \"\".concat(_width2, \"px\");\n        image.style.height = \"\".concat(_height2, \"px\");\n        positioning.currentHeight = _height2;\n        positioning.currentWidth = _width2;\n      } else if (isVertical) {\n        var _diff = Math.floor(positioning.startY - event.clientY);\n\n        _diff = positioning.direction & Direction.south ? -_diff : _diff;\n\n        var _height3 = clamp(positioning.startHeight + _diff, minHeight, maxHeightContainer);\n\n        image.style.height = \"\".concat(_height3, \"px\");\n        positioning.currentHeight = _height3;\n      } else {\n        var _diff2 = Math.floor(positioning.startX - event.clientX);\n\n        _diff2 = positioning.direction & Direction.east ? -_diff2 : _diff2;\n\n        var _width3 = clamp(positioning.startWidth + _diff2, minWidth, maxWidthContainer);\n\n        image.style.width = \"\".concat(_width3, \"px\");\n        positioning.currentWidth = _width3;\n      }\n    }\n  };\n\n  var handlePointerUp = function handlePointerUp() {\n    var image = imageRef.current;\n    var positioning = positioningRef.current;\n    var controlWrapper = controlWrapperRef.current;\n\n    if (image !== null && controlWrapper !== null && positioning.isResizing) {\n      var _width4 = positioning.currentWidth;\n      var _height4 = positioning.currentHeight;\n      positioning.startWidth = 0;\n      positioning.startHeight = 0;\n      positioning.ratio = 0;\n      positioning.startX = 0;\n      positioning.startY = 0;\n      positioning.currentWidth = 0;\n      positioning.currentHeight = 0;\n      positioning.isResizing = false;\n      controlWrapper.classList.remove('image-control-wrapper--resizing');\n      setEndCursor();\n      onResizeEnd(_width4, _height4);\n      document.removeEventListener('pointermove', handlePointerMove);\n      document.removeEventListener('pointerup', handlePointerUp);\n    }\n  };\n\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n    ref: controlWrapperRef,\n    children: [!showCaption && captionsEnabled && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n      className: \"image-caption-button\",\n      ref: buttonRef,\n      onClick: function onClick() {\n        setShowCaption(!showCaption);\n      },\n      children: \"Add Caption\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-n\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.north);\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-ne\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.north | Direction.east);\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-e\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.east);\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-se\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.south | Direction.east);\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-s\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.south);\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-sw\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.south | Direction.west);\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-w\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.west);\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n      className: \"image-resizer image-resizer-nw\",\n      onPointerDown: function onPointerDown(event) {\n        handlePointerDown(event, Direction.north | Direction.west);\n      }\n    })]\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xleGljYWxFZGl0b3IvdWkvSW1hZ2VSZXNpemVyLnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBOzs7O0FBRUEsU0FBU0UsS0FBVCxDQUFlQyxLQUFmLEVBQThCQyxHQUE5QixFQUEyQ0MsR0FBM0MsRUFBd0Q7RUFDdEQsT0FBT0MsSUFBSSxDQUFDRixHQUFMLENBQVNFLElBQUksQ0FBQ0QsR0FBTCxDQUFTRixLQUFULEVBQWdCQyxHQUFoQixDQUFULEVBQStCQyxHQUEvQixDQUFQO0FBQ0Q7O0FBRUQsSUFBTUUsU0FBUyxHQUFHO0VBQ2hCQyxJQUFJLEVBQUUsS0FBSyxDQURLO0VBRWhCQyxLQUFLLEVBQUUsS0FBSyxDQUZJO0VBR2hCQyxLQUFLLEVBQUUsS0FBSyxDQUhJO0VBSWhCQyxJQUFJLEVBQUUsS0FBSztBQUpLLENBQWxCO0FBT2UsU0FBU0MsWUFBVCxPQW9CQztFQUFBLElBbkJkQyxhQW1CYyxRQW5CZEEsYUFtQmM7RUFBQSxJQWxCZEMsV0FrQmMsUUFsQmRBLFdBa0JjO0VBQUEsSUFqQmRDLFNBaUJjLFFBakJkQSxTQWlCYztFQUFBLElBaEJkQyxRQWdCYyxRQWhCZEEsUUFnQmM7RUFBQSxJQWZkQyxRQWVjLFFBZmRBLFFBZWM7RUFBQSxJQWRkQyxNQWNjLFFBZGRBLE1BY2M7RUFBQSxJQWJkQyxXQWFjLFFBYmRBLFdBYWM7RUFBQSxJQVpkQyxjQVljLFFBWmRBLGNBWWM7RUFBQSxJQVhkQyxlQVdjLFFBWGRBLGVBV2M7RUFDZCxJQUFNQyxpQkFBaUIsR0FBR3JCLDZDQUFNLENBQWlCLElBQWpCLENBQWhDO0VBQ0EsSUFBTXNCLFVBQVUsR0FBR3RCLDZDQUFNLENBQUM7SUFDeEJ1QixRQUFRLEVBQUUsRUFEYztJQUV4QnJCLEtBQUssRUFBRTtFQUZpQixDQUFELENBQXpCO0VBSUEsSUFBTXNCLGNBQWMsR0FBR3hCLDZDQUFNLENBVTFCO0lB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LEVBQVc7UUFDeEJELGlCQUFpQixDQUFDQyxLQUFELEVBQVFuRCxTQUFTLENBQUNHLEtBQVYsR0FBa0JILFNBQVMsQ0FBQ0MsSUFBcEMsQ0FBakI7TUFDRDtJQUpILEVBN0JGLGVBbUNFO01BQ0UsU0FBUyxFQUFDLCtCQURaO01BRUUsYUFBYSxFQUFFLHVCQUFDa0QsS0FBRCxFQUFXO1FBQ3hCRCxpQkFBaUIsQ0FBQ0MsS0FBRCxFQUFRbkQsU0FBUyxDQUFDRyxLQUFsQixDQUFqQjtNQUNEO0lBSkgsRUFuQ0YsZUF5Q0U7TUFDRSxTQUFTLEVBQUMsZ0NBRFo7TUFFRSxhQUFhLEVBQUUsdUJBQUNnRCxLQUFELEVBQVc7UUFDeEJELGlCQUFpQixDQUFDQyxLQUFELEVBQVFuRCxTQUFTLENBQUNHLEtBQVYsR0FBa0JILFNBQVMsQ0FBQ0ksSUFBcEMsQ0FBakI7TUFDRDtJQUpILEVBekNGLGVBK0NFO01BQ0UsU0FBUyxFQUFDLCtCQURaO01BRUUsYUFBYSxFQUFFLHVCQUFDK0MsS0FBRCxFQUFXO1FBQ3hCRCxpQkFBaUIsQ0FBQ0MsS0FBRCxFQUFRbkQsU0FBUyxDQUFDSSxJQUFsQixDQUFqQjtNQUNEO0lBSkgsRUEvQ0YsZUFxREU7TUFDRSxTQUFTLEVBQUMsZ0NBRFo7TUFFRSxhQUFhLEVBQUUsdUJBQUMrQyxLQUFELEVBQVc7UUFDeEJELGlCQUFpQixDQUFDQyxLQUFELEVBQVFuRCxTQUFTLENBQUNFLEtBQVYsR0FBa0JGLFNBQVMsQ0FBQ0ksSUFBcEMsQ0FBakI7TUFDRDtJQUpILEVBckRGO0VBQUEsRUFERjtBQThERCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jsb2ctdWkvLi9jb21wb25lbnRzL0xleGljYWxFZGl0b3IvdWkvSW1hZ2VSZXNpemVyLnRzeD82ZTg2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuaW1wb3J0IHR5cGUge0xleGljYWxFZGl0b3J9IGZyb20gJ2xleGljYWwnO1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3VzZVJlZn0gZnJvbSAncmVhY3QnO1xuXG5mdW5jdGlvbiBjbGFtcCh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuXG5jb25zdCBEaXJlY3Rpb24gPSB7XG4gIGVhc3Q6IDEgPDwgMCxcbiAgbm9ydGg6IDEgPDwgMyxcbiAgc291dGg6IDEgPDwgMSxcbiAgd2VzdDogMSA8PCAyLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW1hZ2VSZXNpemVyKHtcbiAgb25SZXNpemVTdGFydCxcbiAgb25SZXNpemVFbmQsXG4gIGJ1dHRvblJlZixcbiAgaW1hZ2VSZWYsXG4gIG1heFdpZHRoLFxuICBlZGl0b3IsXG4gIHNob3dDYXB0aW9uLFxuICBzZXRTaG93Q2FwdGlvbixcbiAgY2FwdGlvbnNFbmFibGVkLFxufToge1xuICBlZGl0b3I6IExleGljYWxFZGl0b3I7XG4gIGJ1dHRvblJlZjoge2N1cnJlbnQ6IG51bGwgfCBIVE1MQnV0dG9uRWxlbWVudH07XG4gIGltYWdlUmVmOiB7Y3VycmVudDogbnVsbCB8IEhUTUxFbGVtZW50fTtcbiAgbWF4V2lkdGg/OiBudW1iZXI7XG4gIG9uUmVzaXplRW5kOiAod2lkdGg6ICdpbmhlcml0JyB8IG51bWJlciwgaGVpZ2h0OiAnaW5oZXJpdCcgfCBudW1iZXIpID0+IHZvaWQ7XG4gIG9uUmVzaXplU3RhcnQ6ICgpID0+IHZvaWQ7XG4gIHNldFNob3dDYXB0aW9uOiAoc2hvdzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2hvd0NhcHRpb246IGJvb2xlYW47XG4gIGNhcHRpb25zRW5hYmxlZDogYm9vbGVhbjtcbn0pOiBKU1guRWxlbWVudCB7XG4gIGNvbnN0IGNvbnRyb2xXcmFwcGVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdXNlclNlbGVjdCA9IHVzZVJlZih7XG4gICAgcHJpb3JpdHk6ICcnLFxuICAgIHZhbHVlOiAnZGVmYXVsdCcsXG4gIH0pO1xuICBjb25zdCBwb3NpdGlvbmluZ1JlZiA9IHVzZVJlZjx7XG4gICAgY3VycmVudEhlaWdodDogJ2luaGVyaXQnIHwgbnVtYmVyO1xuICAgIGN1cnJlbnRXaWR0aDogJ2luaGVyaXQnIHwgbnVtYmVyO1xuICAgIGRpcmVjdGlvbjogbnVtYmVyO1xuICAgIGlzUmVzaXppbmc6IGJvb2xlYW47XG4gICAgcmF0aW86IG51bWJlcjtcbiAgICBzdGFydEhlaWdodDogbnVtYmVyO1xuICAgIHN0YXJ0V2lkdGg6IG51bWJlcjtcbiAgICBzdGFydFg6IG51bWJlcjtcbiAgICBzdGFydFk6IG51bWJlcjtcbiAgfT4oe1xuICAgIGN1cnJlbnRIZWlnaHQ6IDAsXG4gICAgY3VycmVudFdpZHRoOiAwLFxuICAgIGRpcmVjdGlvbjogMCxcbiAgICBpc1Jlc2l6aW5nOiBmYWxzZSxcbiAgICByYXRpbzogMCxcbiAgICBzdGFydEhlaWdodDogMCxcbiAgICBzdGFydFdpZHRoOiAwLFxuICAgIHN0YXJ0WDogMCxcbiAgICBzdGFydFk6IDAsXG4gIH0pO1xuICBjb25zdCBlZGl0b3JSb290RWxlbWVudCA9IGVkaXRvci5nZXRSb290RWxlbWVudCgpO1xuICAvLyBGaW5kIG1heCB3aWR0aCwgYWNjb3VudGluZyBmb3IgZWRpdG9yIHBhZGRpbmcuXG4gIGNvbnN0IG1heFdpZHRoQ29udGFpbmVyID0gbWF4V2lkdGhcbiAgICA/IG1heFdpZHRoXG4gICAgOiBlZGl0b3JSb290RWxlbWVudCAhPT0gbnVsbFxuICAgID8gZWRpdG9yUm9vdEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLSAyMFxuICAgIDogMTAwO1xuICBjb25zdCBtYXhIZWlnaHRDb250YWluZXIgPVxuICAgIGVkaXRvclJvb3RFbGVtZW50ICE9PSBudWxsXG4gICAgICA/IGVkaXRvclJvb3RFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAtIDIwXG4gICAgICA6IDEwMDtcblxuICBjb25zdCBtaW5XaWR0aCA9IDEwMDtcbiAgY29uc3QgbWluSGVpZ2h0ID0gMTAwO1xuXG4gIGNvbnN0IHNldFN0YXJ0Q3Vyc29yID0gKGRpcmVjdGlvbjogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgZXcgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5lYXN0IHx8IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLndlc3Q7XG4gICAgY29uc3QgbnMgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5ub3J0aCB8fCBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5zb3V0aDtcbiAgICBjb25zdCBud3NlID1cbiAgICAgIChkaXJlY3Rpb24gJiBEaXJlY3Rpb24ubm9ydGggJiYgZGlyZWN0aW9uICYgRGlyZWN0aW9uLndlc3QpIHx8XG4gICAgICAoZGlyZWN0aW9uICYgRGlyZWN0aW9uLnNvdXRoICYmIGRpcmVjdGlvbiAmIERpcmVjdGlvbi5lYXN0KTtcblxuICAgIGNvbnN0IGN1cnNvckRpciA9IGV3ID8gJ2V3JyA6IG5zID8gJ25zJyA6IG53c2UgPyAnbndzZScgOiAnbmVzdyc7XG5cbiAgICBpZiAoZWRpdG9yUm9vdEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIGVkaXRvclJvb3RFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAnY3Vyc29yJyxcbiAgICAgICAgYCR7Y3Vyc29yRGlyfS1yZXNpemVgLFxuICAgICAgICAnaW1wb3J0YW50JyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5ib2R5ICE9PSBudWxsKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAnY3Vyc29yJyxcbiAgICAgICAgYCR7Y3Vyc29yRGlyfS1yZXNpemVgLFxuICAgICAgICAnaW1wb3J0YW50JyxcbiAgICAgICk7XG4gICAgICB1c2VyU2VsZWN0LmN1cnJlbnQudmFsdWUgPSBkb2N1bWVudC5ib2R5LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICAgICctd2Via2l0LXVzZXItc2VsZWN0JyxcbiAgICAgICk7XG4gICAgICB1c2VyU2VsZWN0LmN1cnJlbnQucHJpb3JpdHkgPSBkb2N1bWVudC5ib2R5LnN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkoXG4gICAgICAgICctd2Via2l0LXVzZXItc2VsZWN0JyxcbiAgICAgICk7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAnLXdlYmtpdC11c2VyLXNlbGVjdCcsXG4gICAgICAgIGBub25lYCxcbiAgICAgICAgJ2ltcG9ydGFudCcsXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZXRFbmRDdXJzb3IgPSAoKSA9PiB7XG4gICAgaWYgKGVkaXRvclJvb3RFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICBlZGl0b3JSb290RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnY3Vyc29yJywgJ2RlZmF1bHQnKTtcbiAgICB9XG4gICAgaWYgKGRvY3VtZW50LmJvZHkgIT09IG51bGwpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoJ2N1cnNvcicsICdkZWZhdWx0Jyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAnLXdlYmtpdC11c2VyLXNlbGVjdCcsXG4gICAgICAgIHVzZXJTZWxlY3QuY3VycmVudC52YWx1ZSxcbiAgICAgICAgdXNlclNlbGVjdC5jdXJyZW50LnByaW9yaXR5LFxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUG9pbnRlckRvd24gPSAoXG4gICAgZXZlbnQ6IFJlYWN0LlBvaW50ZXJFdmVudDxIVE1MRGl2RWxlbWVudD4sXG4gICAgZGlyZWN0aW9uOiBudW1iZXIsXG4gICkgPT4ge1xuICAgIGlmICghZWRpdG9yLmlzRWRpdGFibGUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGltYWdlID0gaW1hZ2VSZWYuY3VycmVudDtcbiAgICBjb25zdCBjb250cm9sV3JhcHBlciA9IGNvbnRyb2xXcmFwcGVyUmVmLmN1cnJlbnQ7XG5cbiAgICBpZiAoaW1hZ2UgIT09IG51bGwgJiYgY29udHJvbFdyYXBwZXIgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHt3aWR0aCwgaGVpZ2h0fSA9IGltYWdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgcG9zaXRpb25pbmcgPSBwb3NpdGlvbmluZ1JlZi5jdXJyZW50O1xuICAgICAgcG9zaXRpb25pbmcuc3RhcnRXaWR0aCA9IHdpZHRoO1xuICAgICAgcG9zaXRpb25pbmcuc3RhcnRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBwb3NpdGlvbmluZy5yYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgICAgcG9zaXRpb25pbmcuY3VycmVudFdpZHRoID0gd2lkdGg7XG4gICAgICBwb3NpdGlvbmluZy5jdXJyZW50SGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgcG9zaXRpb25pbmcuc3RhcnRYID0gZXZlbnQuY2xpZW50WDtcbiAgICAgIHBvc2l0aW9uaW5nLnN0YXJ0WSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICBwb3NpdGlvbmluZy5pc1Jlc2l6aW5nID0gdHJ1ZTtcbiAgICAgIHBvc2l0aW9uaW5nLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcblxuICAgICAgc2V0U3RhcnRDdXJzb3IoZGlyZWN0aW9uKTtcbiAgICAgIG9uUmVzaXplU3RhcnQoKTtcblxuICAgICAgY29udHJvbFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtY29udHJvbC13cmFwcGVyLS1yZXNpemluZycpO1xuICAgICAgaW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgIGltYWdlLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIGhhbmRsZVBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGhhbmRsZVBvaW50ZXJVcCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVQb2ludGVyTW92ZSA9IChldmVudDogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBpbWFnZVJlZi5jdXJyZW50O1xuICAgIGNvbnN0IHBvc2l0aW9uaW5nID0gcG9zaXRpb25pbmdSZWYuY3VycmVudDtcblxuICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9XG4gICAgICBwb3NpdGlvbmluZy5kaXJlY3Rpb24gJiAoRGlyZWN0aW9uLmVhc3QgfCBEaXJlY3Rpb24ud2VzdCk7XG4gICAgY29uc3QgaXNWZXJ0aWNhbCA9XG4gICAgICBwb3NpdGlvbmluZy5kaXJlY3Rpb24gJiAoRGlyZWN0aW9uLnNvdXRoIHwgRGlyZWN0aW9uLm5vcnRoKTtcblxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCAmJiBwb3NpdGlvbmluZy5pc1Jlc2l6aW5nKSB7XG4gICAgICAvLyBDb3JuZXIgY3Vyc29yXG4gICAgICBpZiAoaXNIb3Jpem9udGFsICYmIGlzVmVydGljYWwpIHtcbiAgICAgICAgbGV0IGRpZmYgPSBNYXRoLmZsb29yKHBvc2l0aW9uaW5nLnN0YXJ0WCAtIGV2ZW50LmNsaWVudFgpO1xuICAgICAgICBkaWZmID0gcG9zaXRpb25pbmcuZGlyZWN0aW9uICYgRGlyZWN0aW9uLmVhc3QgPyAtZGlmZiA6IGRpZmY7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBjbGFtcChcbiAgICAgICAgICBwb3NpdGlvbmluZy5zdGFydFdpZHRoICsgZGlmZixcbiAgICAgICAgICBtaW5XaWR0aCxcbiAgICAgICAgICBtYXhXaWR0aENvbnRhaW5lcixcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBoZWlnaHQgPSB3aWR0aCAvIHBvc2l0aW9uaW5nLnJhdGlvO1xuICAgICAgICBpbWFnZS5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICAgICAgaW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgICAgcG9zaXRpb25pbmcuY3VycmVudEhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgcG9zaXRpb25pbmcuY3VycmVudFdpZHRoID0gd2lkdGg7XG4gICAgICB9IGVsc2UgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgbGV0IGRpZmYgPSBNYXRoLmZsb29yKHBvc2l0aW9uaW5nLnN0YXJ0WSAtIGV2ZW50LmNsaWVudFkpO1xuICAgICAgICBkaWZmID0gcG9zaXRpb25pbmcuZGlyZWN0aW9uICYgRGlyZWN0aW9uLnNvdXRoID8gLWRpZmYgOiBkaWZmO1xuXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGNsYW1wKFxuICAgICAgICAgIHBvc2l0aW9uaW5nLnN0YXJ0SGVpZ2h0ICsgZGlmZixcbiAgICAgICAgICBtaW5IZWlnaHQsXG4gICAgICAgICAgbWF4SGVpZ2h0Q29udGFpbmVyLFxuICAgICAgICApO1xuXG4gICAgICAgIGltYWdlLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgICAgIHBvc2l0aW9uaW5nLmN1cnJlbnRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgZGlmZiA9IE1hdGguZmxvb3IocG9zaXRpb25pbmcuc3RhcnRYIC0gZXZlbnQuY2xpZW50WCk7XG4gICAgICAgIGRpZmYgPSBwb3NpdGlvbmluZy5kaXJlY3Rpb24gJiBEaXJlY3Rpb24uZWFzdCA/IC1kaWZmIDogZGlmZjtcblxuICAgICAgICBjb25zdCB3aWR0aCA9IGNsYW1wKFxuICAgICAgICAgIHBvc2l0aW9uaW5nLnN0YXJ0V2lkdGggKyBkaWZmLFxuICAgICAgICAgIG1pbldpZHRoLFxuICAgICAgICAgIG1heFdpZHRoQ29udGFpbmVyLFxuICAgICAgICApO1xuXG4gICAgICAgIGltYWdlLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICAgICAgICBwb3NpdGlvbmluZy5jdXJyZW50V2lkdGggPSB3aWR0aDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZVBvaW50ZXJVcCA9ICgpID0+IHtcbiAgICBjb25zdCBpbWFnZSA9IGltYWdlUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgcG9zaXRpb25pbmcgPSBwb3NpdGlvbmluZ1JlZi5jdXJyZW50O1xuICAgIGNvbnN0IGNvbnRyb2xXcmFwcGVyID0gY29udHJvbFdyYXBwZXJSZWYuY3VycmVudDtcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwgJiYgY29udHJvbFdyYXBwZXIgIT09IG51bGwgJiYgcG9zaXRpb25pbmcuaXNSZXNpemluZykge1xuICAgICAgY29uc3Qgd2lkdGggPSBwb3NpdGlvbmluZy5jdXJyZW50V2lkdGg7XG4gICAgICBjb25zdCBoZWlnaHQgPSBwb3NpdGlvbmluZy5jdXJyZW50SGVpZ2h0O1xuICAgICAgcG9zaXRpb25pbmcuc3RhcnRXaWR0aCA9IDA7XG4gICAgICBwb3NpdGlvbmluZy5zdGFydEhlaWdodCA9IDA7XG4gICAgICBwb3NpdGlvbmluZy5yYXRpbyA9IDA7XG4gICAgICBwb3NpdGlvbmluZy5zdGFydFggPSAwO1xuICAgICAgcG9zaXRpb25pbmcuc3RhcnRZID0gMDtcbiAgICAgIHBvc2l0aW9uaW5nLmN1cnJlbnRXaWR0aCA9IDA7XG4gICAgICBwb3NpdGlvbmluZy5jdXJyZW50SGVpZ2h0ID0gMDtcbiAgICAgIHBvc2l0aW9uaW5nLmlzUmVzaXppbmcgPSBmYWxzZTtcblxuICAgICAgY29udHJvbFdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnaW1hZ2UtY29udHJvbC13cmFwcGVyLS1yZXNpemluZycpO1xuXG4gICAgICBzZXRFbmRDdXJzb3IoKTtcbiAgICAgIG9uUmVzaXplRW5kKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIGhhbmRsZVBvaW50ZXJNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGhhbmRsZVBvaW50ZXJVcCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gKFxuICAgIDxkaXYgcmVmPXtjb250cm9sV3JhcHBlclJlZn0+XG4gICAgICB7IXNob3dDYXB0aW9uICYmIGNhcHRpb25zRW5hYmxlZCAmJiAoXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzc05hbWU9XCJpbWFnZS1jYXB0aW9uLWJ1dHRvblwiXG4gICAgICAgICAgcmVmPXtidXR0b25SZWZ9XG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgc2V0U2hvd0NhcHRpb24oIXNob3dDYXB0aW9uKTtcbiAgICAgICAgICB9fT5cbiAgICAgICAgICBBZGQgQ2FwdGlvblxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICl9XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cImltYWdlLXJlc2l6ZXIgaW1hZ2UtcmVzaXplci1uXCJcbiAgICAgICAgb25Qb2ludGVyRG93bj17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgaGFuZGxlUG9pbnRlckRvd24oZXZlbnQsIERpcmVjdGlvbi5ub3J0aCk7XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJpbWFnZS1yZXNpemVyIGltYWdlLXJlc2l6ZXItbmVcIlxuICAgICAgICBvblBvaW50ZXJEb3duPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICBoYW5kbGVQb2ludGVyRG93bihldmVudCwgRGlyZWN0aW9uLm5vcnRoIHwgRGlyZWN0aW9uLmVhc3QpO1xuICAgICAgICB9fVxuICAgICAgLz5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwiaW1hZ2UtcmVzaXplciBpbWFnZS1yZXNpemVyLWVcIlxuICAgICAgICBvblBvaW50ZXJEb3duPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICBoYW5kbGVQb2ludGVyRG93bihldmVudCwgRGlyZWN0aW9uLmVhc3QpO1xuICAgICAgICB9fVxuICAgICAgLz5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwiaW1hZ2UtcmVzaXplciBpbWFnZS1yZXNpemVyLXNlXCJcbiAgICAgICAgb25Qb2ludGVyRG93bj17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgaGFuZGxlUG9pbnRlckRvd24oZXZlbnQsIERpcmVjdGlvbi5zb3V0aCB8IERpcmVjdGlvbi5lYXN0KTtcbiAgICAgICAgfX1cbiAgICAgIC8+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cImltYWdlLXJlc2l6ZXIgaW1hZ2UtcmVzaXplci1zXCJcbiAgICAgICAgb25Qb2ludGVyRG93bj17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgaGFuZGxlUG9pbnRlckRvd24oZXZlbnQsIERpcmVjdGlvbi5zb3V0aCk7XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJpbWFnZS1yZXNpemVyIGltYWdlLXJlc2l6ZXItc3dcIlxuICAgICAgICBvblBvaW50ZXJEb3duPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICBoYW5kbGVQb2ludGVyRG93bihldmVudCwgRGlyZWN0aW9uLnNvdXRoIHwgRGlyZWN0aW9uLndlc3QpO1xuICAgICAgICB9fVxuICAgICAgLz5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwiaW1hZ2UtcmVzaXplciBpbWFnZS1yZXNpemVyLXdcIlxuICAgICAgICBvblBvaW50ZXJEb3duPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICBoYW5kbGVQb2ludGVyRG93bihldmVudCwgRGlyZWN0aW9uLndlc3QpO1xuICAgICAgICB9fVxuICAgICAgLz5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwiaW1hZ2UtcmVzaXplciBpbWFnZS1yZXNpemVyLW53XCJcbiAgICAgICAgb25Qb2ludGVyRG93bj17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgaGFuZGxlUG9pbnRlckRvd24oZXZlbnQsIERpcmVjdGlvbi5ub3J0aCB8IERpcmVjdGlvbi53ZXN0KTtcbiAgICAgICAgfX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VSZWYiLCJjbGFtcCIsInZhbHVlIiwibWluIiwibWF4IiwiTWF0aCIsIkRpcmVjdGlvbiIsImVhc3QiLCJub3J0aCIsInNvdXRoIiwid2VzdCIsIkltYWdlUmVzaXplciIsIm9uUmVzaXplU3RhcnQiLCJvblJlc2l6ZUVuZCIsImJ1dHRvblJlZiIsImltYWdlUmVmIiwibWF4V2lkdGgiLCJlZGl0b3IiLCJzaG93Q2FwdGlvbiIsInNldFNob3dDYXB0aW9uIiwiY2FwdGlvbnNFbmFibGVkIiwiY29udHJvbFdyYXBwZXJSZWYiLCJ1c2VyU2VsZWN0IiwicHJpb3JpdHkiLCJwb3NpdGlvbmluZ1JlZiIsImN1cnJlbnRIZWlnaHQiLCJjdXJyZW50V2lkdGgiLCJkaXJlY3Rpb24iLCJpc1Jlc2l6aW5nIiwicmF0aW8iLCJzdGFydEhlaWdodCIsInN0YXJ0V2lkdGgiLCJzdGFydFgiLCJzdGFydFkiLCJlZGl0b3JSb290RWxlbWVudCIsImdldFJvb3RFbGVtZW50IiwibWF4V2lkdGhDb250YWluZXIiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsIm1heEhlaWdodENvbnRhaW5lciIsImhlaWdodCIsIm1pbldpZHRoIiwibWluSGVpZ2h0Iiwic2V0U3RhcnRDdXJzb3IiLCJldyIsIm5zIiwibndzZSIsImN1cnNvckRpciIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJkb2N1bWVudCIsImJvZHkiLCJjdXJyZW50IiwiZ2V0UHJvcGVydHlWYWx1ZSIsImdldFByb3BlcnR5UHJpb3JpdHkiLCJzZXRFbmRDdXJzb3IiLCJoYW5kbGVQb2ludGVyRG93biIsImV2ZW50IiwiaXNFZGl0YWJsZSIsImltYWdlIiwiY29udHJvbFdyYXBwZXIiLCJwb3NpdGlvbmluZyIsImNsaWVudFgiLCJjbGllbnRZIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZVBvaW50ZXJNb3ZlIiwiaGFuZGxlUG9pbnRlclVwIiwiaXNIb3Jpem9udGFsIiwiaXNWZXJ0aWNhbCIsImRpZmYiLCJmbG9vciIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/LexicalEditor/ui/ImageResizer.tsx\n");

/***/ })

};
;